# サーバーの理解
## 1. サーバーとは
サーバーとは、サービスを提供するソフトウェアとその機能が稼働しているコンピュータのセットのことを指します。  
機器だけを指してサーバーと言いがちですが、サーバーソフトウェアが稼働して初めてサーバーとして機能するので機器とソフトウェアを合わせてサーバーと言います。
## 2. サーバーソフトウェア
サーバーソフトウェアがサーバーの役割と機能を提供してくれます。  
主に利用するサーバーソフトウェアとして
- WindowsServer
- LinuxServer

の２種類があります。
## 3. サーバーのハードウェア
### 3-1. 一般的なサーバーのハードウェア
![](../../aws_cp_server_understanding_server_hardware.png)  
サーバーのハードウェアはデータセンターなどに設置された巨大なコンピュータのことを主に指します。  
ラックと呼ばれる専用の棚にサーバーやネットワーク機器などを何台も並べて設置されています。  
また規模が大きい場合は画像のようにラックを何台も並べて、ようやく１つのシステムのハードウェアを構成することもあります。
### 3-2. 身近なサーバーのハードウェア
サーバーのハードウェアと言ってもサーバーソフトウェアを入れなければ巨大なパソコンと変わりありません。  
逆に言えば普段皆さんが利用しているパソコンやスマートフォンもサーバーソフトウェアを入れればサーバーとして機能させることができます。
## 4. サーバーの役割
![](../../aws_cp_server_understanding_server_request_and_responce.png)
何らかのサービスを提供するもの＝サーバーと呼びます。  
サービスを提供するためにリクエストをサーバーが受け取って、そのレスポンスをクライアントに返すことでサービスが実現します。  
例えば画像のようにメルカリの買い物サービスを実現するためにメルカリサーバーが
- 商品を検索する
- 商品を購入する

といった多種多様なリクエストを処理して、クライアントに検索結果だったり購入処理を進めるレスポンスを返すことでサービスが機能しています。
## 5. サーバーの役割の種類
役割に応じて様々なサーバーが存在します。

| 役割 | 概要 |
|-------|-------|
| Webサーバー | Webアプリケーションを動かし、Webページなどを表示するためのサーバー |
| アプリケーションサーバー | データベースからデータを取ってきたり、受け取ったリクエストを基に処理を行うためのサーバー |
| バッチサーバー | バッチ処理を行うサーバー<br/>バッチ処理とは深夜の決められた時間にサーバーのバックアップをしたり、メンテナンスをしたりするような処理を指します |
| データベースサーバー<br/>（DBサーバー） | データベースの処理を専門に行うサーバー |
| APIサーバー | アプリケーション間の連携に使うAPIを処理するための専門のサーバー |
| DNSサーバー | ドメインの名前解決をしてくれるサーバー<br/>名前解決とは例えばYahoo!Japanのyahoo.co.jpのようなURLを基に実際にYahoo!Japanが稼働しているサーバーを探してくれる機能のことを言います |
| メールサーバー | メールの送受信を行うためのサーバー |
私達が普段利用しているWebサービスやアプリケーションもこれらの色々なサーバーを活用して機能しています。
### 5-1. Webサーバー
WebサーバーはHTTPに対応してWebページを表示させたりするサーバーのことを指します。  
Webサイトを作成・管理するソフトウェア（代表的なソフトウェアとしてApache、Nginxなど）によって起動するサーバーです。  
Webページを作成してHTML上に表示します。  
クライアントからのリクエストに対してWebページや画像をレスポンスとして返す動きを行います。
### 5-2. データベースサーバー（DBサーバー）
リクエストに対して必要なデータを登録・更新・取得・削除などのデータ管理を実行するサーバーのことを指します。  
データベース処理を管理するソフトウェアによって実行されるサーバーです。  
データの登録・更新・取得・削除などの処理を実行します。  
なおこの登録・更新・取得・削除の処理をまとめてCRUDと呼びます。（Create：登録、Read：読み込み（取得）、Update：更新、Delete：削除）  
データベースのバックアップなどの管理処理も実施することができます。
### 5-3. アプリケーション開発におけるDB
![](../../aws_cp_server_understanding_webapplication_websrv_and_db.png)
Webアプリケーションのサーバー環境を構築する場合、図のようにWebサーバーとDBサーバーを基本的には別々に構築します。  
その場合の処理の流れは以下のとおりです。
#### ①ローカル端末からWebページやWebアプリケーションに対してDBを利用するリクエストを行う
#### ②Webサーバー（またはアプリケーションサーバー）からDBサーバーにDB処理がリクエストされる
#### ③DBサーバーがリクエストに応じたDBエンジンによるトランザクション処理を実行して、実行結果を返答する
#### ④DBサーバーの実行結果を含めたアプリケーションの処理結果をローカル端末に返答する
なおサーバーを別々に構築する理由ですが、各役割を別々のサーバーで行わせることで負荷を分散し、またボトルネックを分かりやすくするためになります。