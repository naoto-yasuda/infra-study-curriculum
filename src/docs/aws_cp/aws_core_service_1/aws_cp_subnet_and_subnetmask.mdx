# サブネットとサブネットマスク
## 1. IPアドレスとサブネットマスク
### 1-1. IPアドレス
![](../../aws_cp_subnet_and_subnetmask_ip_address.png)
IPアドレスは0～255までの３桁×４つの組み合わせで構成され、各桁が８つの２進数のバイナリ値の集合を表します。
### 1-2. サブネットマスク
```
10.0.0.255/24
```
サブネットマスクとはIPアドレス表記の後ろに「/数値」で記載されている値のことです。
### 1-3. CIDR（Classles Inter-Domain Routing）
CIDR（サイダーと読む）とは上述したサブネットマスクの値によって指定された、同じネットワークとして扱うIPアドレスの範囲のことを言います。
```
■CIDRが/8
10.0.0.255/8

２進数にすると…
00001010.00000000.00000000.11111111

/8なので最初の８桁がロックされて変更不可
「00001010」.00000000.00000000.11111111

■CIDRが/16
10.0.0.255/16

/16なので最初の１６桁がロックされて変更不可
「00001010.00000000」.00000000.11111111

■CIDRが/24
10.0.0.255/24

/24なので最初の２４桁がロックされて変更不可
「00001010.00000000.00000000」.11111111
```
２進数表記にした時にサブネットマスクで指定する数が利用できないようにロックされて変更不可となり、それ以外がIPアドレスとして利用できます。
```
■10.0.0.255/8
最初の８桁分がロックされているので
10.0.0.0　～　10.255.255.255 が利用できる範囲

■10.0.0.255/16
最初の１６桁分がロックされているので
10.0.0.0　～　10.0.255.255 が利用できる範囲

■10.0.0.255/24
最初の２４桁分がロックされているので
10.0.0.0　～　10.0.0.255 が利用できる範囲
```
AWS上でネットワークを構築する際はIPアドレスの範囲を今後の拡張も踏まえて十分な余裕は確保しつつも多すぎない範囲を指定します。  
/16でベースのネットワークを作成し、そのネットワークを/24で後述するサブネット毎に分けるのが基本的な形になります。
#### 1-3-1. CIDRに設定する数による利用可能なIPアドレス数の組み合わせ
| サブネットマスク | サブネットあたりのIPアドレス数 |
|-------|-------|
| /18 | 16384 |
| /20 | 4096 |
| /22 | 1025 |
| /24 | 256 |
| /26 | 64 |
| /28 | 16 |
### 1-4. サブネットによるグループ化
![](../../aws_cp_subnet_and_subnetmask_subnet_not_group.png)  
図のようにローカルなネットワークに沢山の機器が接続されていると特定の端末を発見するには時間が掛かります。  

![](../../aws_cp_subnet_and_subnetmask_subnet_group.png)
そこでサブネットマスクでアドレス範囲をグループ化することで特定の端末を見つけやすくすることができます。  
このグループ化されたアドレス範囲のことをサブネットと呼びます。
