# 仮想化とは
## 1. AWSと仮想化との関係
これから学ぶAWSはクラウドのサービスですが、クラウドは仮想化技術によって成り立っています。  
![](../../aws_cp_what_is_virtualization_cloud_and_virtualization_image.png)
## 2. 仮想化技術とは
仮想化技術とは１つの大きなサーバーを小分けにして複数の仮想化サーバーとして利用したり、複数のディスクを１つの大きなディスクとして扱ったりすることができる技術です。  
### 2-1. 実質的な機能をユーザーに切り分けて提供できる
物理的な大きなサーバーに対して仮想化ソフトウェアを導入することで、実質的な機能をユーザーに切り分けて提供することができます。  
![](../../aws_cp_what_is_virtualization_virtualization_image.png)
個々のユーザーは切り分けられた各仮想サーバーを個別のサーバーのように利用することができます。  
例えばインストールするOSやソフトウェアも別々で管理することができ、サーバーを使うユーザーから見ると物理的にサーバーが１台用意されているのと基本的には違いは
ありません。  
### 2-2. それぞれのサーバーのスペックは物理サーバーを切り分けて柔軟に利用することができる
仮想サーバーのスペックは基になる物理サーバーのスペックを切り分けるような形で柔軟に利用することができます。
![](../../aws_cp_what_is_virtualization_virtualization_separate_image.png) 
### 2-3. 仮想化ソフトウェアの種類
仮想化ソフトウェアには大きく分けて「ホスト型」、「ハイパーバイザー型」、「コンテナ型」の３種類があります。
![](../../aws_cp_what_is_virtualization_virtualization_type_image.png)
それぞれの違いは下記のとおりです。

| 種類 | 概要 | 詳細 |
|-------|-------|-------|
| ホスト型 | OS上に土台となる仮想化ソフトウェアをインストールして、そのソフトウェア上で仮想マシンを稼働させる方式 | ハイパーバイザー型に比べて既存のホストOSを使えるため手軽にサーバー仮想化がしやすいです。<br/>その代わりゲストOSを動かすのにホストOSの処理も必要になるため処理速度を出しにくいです。<br/>代表的なソフトウェアとして「VirtualBox」が挙げられます。 |
| ハイパーバイザー型 | サーバーへハイパーバイザーと呼ばれる仮想化ソフトウェアを直接インストールして仮想マシンを稼働させる方式 | ホストOSの処理を必要としないためホスト型と比較して処理速度を早くしやすいです。<br/>ただし仮想化専用のサーバーを用意して構築をする必要があるため使えるようになるまで手間が掛かります。<br/>代表的なソフトウェアとして「Hyper-V」が挙げられます。 |
| コンテナ型 | １つのホストOS上にコンテナと呼ばれる独立した環境を用意し、そこでアプリケーションを稼働させる方式 | ゲストOSを起動させる必要がなくCPUやメモリなどのリソースを少ない形で仮想環境を実現することができます。<br/>ただしコンテナは１つのOSから作られているため同じホスト上で異なるOSを動かすことはできません。<br/>代表的なソフトウェアとして「Docker」が挙げられます。 |
### 2-4. 仮想化の対象の種類
インフラの仮想化には大きく分けて以下の４種類があります。

| 種類 | 概要 |
|-------|-------|
| サーバーの仮想化 | １台の物理サーバー上に複数のOSを動作させる技術 |
| ストレージの仮想化 | 複数のストレージを仮想的に結合して１つの大きなストレージプールを構成する技術 |
| ネットワークの仮想化 | 新たな仮想ネットワークの構築や制御をソフトウェアにより動的に実施する技術 |
| デスクトップの仮想化 | サーバー上のPC環境のデスクトップ画面を遠隔地の接続端末に転送する技術 |
単に「仮想化」と言うと「サーバーの仮想化」を指すことが基本的には多いです。
### 2-5. 仮想化のメリット
仮想化を利用することでインフラ利用の効率性や柔軟性が向上するため、主に以下のようなメリットが挙げられます。
#### サーバースペースの削減、データーセンター費用の削減
物理的なサーバー台数を増やさずに済むため、データセンターなどに配置するマシンの数を最小限にすることができます。
#### 効率的なサーバー利用によるコスト削減
物理的なサーバーですと一度建ててしまうと後からスペックを変えたいとか、他のシステムと併用したりすることは難しいです。  
そういった場合新しいサーバーを買い替え・買い足しする必要が出てきます。
ですが仮想化の場合、サーバーを建てた後にスペックを変えることも容易であったり、余っているスペックで別の仮想化サーバーを建てて併用することもしやすいです。
#### 調達の迅速化
物理的なサーバーの場合、サーバーが必要になった都度に製品を選んで、社内で購入の手続きをして、実際に納品されるのを待って…とリードタイムが発生します。  
リードタイムの長さはケースにもよりますが、長い場合で数週間～数ヶ月という期間を要します。  
その点仮想化は既にある物理サーバーに対して構築作業を行うだけのためリードタイムを最小限にでき、数日～２週間くらいの期間でサーバーを用意することができます。
#### 構成変更やメンテナンス対応の柔軟性
構成変更もメンテナンス作業も仮想化上の作業になるため、物理的なサーバーに比べ対応がしやすいです。  
また仮想化ソフトウェアには構成変更やメンテナンス作業をよりやりやすくする機能を持つものもあるため、より柔軟な対応がしやすくなります。
#### セキュリティの向上
仮想化することによってユーザが操作できる範囲を切り分けることができ、各サーバーごとで適切なセキュリティ設定を行うことでより良いセキュリティにすることができます。
## 3. 仮想化のイメージ
物理サーバーと仮想化のイメージの分かり易い例として「一軒家」と「マンション」を思い浮かべてください。  
「一軒家」と「マンション」を比較すると以下のようになると思います。

| 一軒家 | マンション |
|-------|-------|
| １家族が住む | 複数の家族が住む |
| 家の数だけ土地が必要 | 土地は一つで良い |
| 部屋を増やすには増築が必要 | 部屋を増やすには空いてる別の部屋を借りれば良い |
| 新築するには大金が必要 | 建ってるマンションなら少額で良い |
| 新築は時間も掛かる | 建ってるマンションならすぐ入居できる |
といったような形で「一軒家＝物理サーバー」、「マンション＝仮想化サーバー」としてイメージすると良いと思います。