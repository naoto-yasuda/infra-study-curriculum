# マネジメントとガバナンス
AWSには運用保守やサポートに関する支援ツールやサービスが多数存在します。  
ここでは各カテゴリに分けてそれらのツール、サービスについて説明していきます。
## 1. 準備系サービス
マネジメント・コントロールを適切に行うための準備に利用できるサービスとして以下のようなものがあります。

| サービス名 | 説明 |
|-------|-------|
| AWS Control Tower | ベストプラクティスに基づき安全性と適合性を備えた、複数アカウントの AWS 環境を設定および管理するサービス |
| AWS Organizations | 複数のAWS アカウント全体の一元管理と一括請求 |
| AWS Budgets | 予算のしきい値を超えたときにアラートを発信するカスタム予算を設定 |
| AWS License Manager | ソフトウェアベンダーからのソフトウェアライセンスを簡単に管理するサービス |
| AWS Well-Architected Tool | AWSのアーキテクチャ設計原則の確認とワークロードの見直しと改善を支援 |
### 1-1. AWS Control Tower
AWS Control Towerとは、ベストプラクティスに基づき安全性と適合性を備えた、複数アカウントのAWS環境を設定および管理するサービスです。
### 1-2. AWS License Manager
#### 1-2-1. AWS License Managerとは
AWS License Managerとは、ソフトウェアベンダーからのソフトウェアライセンスを簡単に管理するサービスです。
#### 1-2-2. AWS License Managerの特徴
AWS License Managerの特徴には以下のようなものがあります。
- ライセンスの利用数やライセンスの利用条件を登録
- ライセンスの利用状況を追跡して管理することが可能
- コンプライアンス違反などのライセンスルールに反する利用状況を可視化する。
- 既存ライセンスを自動検出するなどの一元的な管理を実現
- ダッシュボードを利用して可視化して、管理可能
## 2. 展開系サービス
AWSのインフラ展開や環境設定を自動化したり、テンプレートを活用してインフラの展開を効率化するためのサービスとして以下のようなものがあります。

| サービス名 | 説明 |
|-------|-------|
| AWS CloudFormation | AWSクラウド環境内の全インフラリソースを記述してテンプレート化して展開する環境自動設定サービス |
| AWS Elastic Beanstalk | WEBアプリケーションの定番構成の構築・デプロイの自動化サービス |
| AWS OpsWorks | OpsWorksはChefまたはPuppetを使用してアプリケーションを設定および運用するための設定管理サービス |
| AWS Service Catalog  | AWS上でデプロイされている IT サービスの一元的な管理を実施するサービス |
| AWS Maketplace | EC2 インスタンスの起動に使用できる AMI など、AWS で実行されるソフトウェアを購入できるオンラインストア |
### 2-1. AWS CloudFormation
#### 2-1-1. AWS CloudFormationとは
AWS CloudFormationとは、AWSクラウド環境内の全インフラリソースを記述してテンプレート化して展開する環境自動設定サービスです。
#### 2-1-2. AWS CloudFormationの特徴
AWS CloudFormationの特徴には以下のようなものがあります。
- プロビジョニングされたリソースの変更・削除が可能
- 追加リソースへの通常課金のみで追加料金なし
- JSON／YAMLで記述する
- クロスリージョンとクロスアカウントで管理
- 直接サポートされていないリソースや機能を利用する場合はカスタムリソースでスタック作成の一部に独自ロジックを組み込むことが可能
#### 2-1-3. CloudFormationの利用方法
![](../../aws_cp_management_and_governance_cloudformation_image.png)
CloudFormationはJSON/YAMLなどのコードでインフラ構築方式がポリシーとして定義されていて、それに基づいて仮想化インフラを構築することが可能です。
### 2-2. AWS Elastic Beanstalk
#### 2-2-1. AWS Elastic Beanstalkとは
AWS Elastic Beanstalkとは、WEBアプリケーションの定番構成の構築・デプロイの自動化サービスです。
#### 2-2-2. AWS Elastic Beanstalkの特徴
AWS Elastic Beanstalkの特徴には以下のようなものがあります。
- 速く簡単にアプリケーションをデプロイするサービス
- Java, PHP, Ruby, Python, Node.js, .NET, Docker, Goに対応してWEBアプリケーションを展開できる
- Apache、Nginx、Passenger、IIS など使い慣れたサーバーでデプロイおよびスケーリングが可能
- コードをアップロードすればキャパシティのプロビジョニング、ロードバランシング、Auto Scaling からアプリケーションのヘルスモニタリングまでデプロイを自動化できる
#### 2-2-3. AWS Elastic Beanstalkのユースケース
Elastic BeanstalkはWebアプリケーションのデプロイを容易にしたり、タスク時間の長いワークロードの展開に利用します。  
それぞれのケースごとに以下のような利用のされ方をします。
##### 2-2-3-1. ウェブサーバー環境
- ELB+ Auto Scalingでスケーラブルな構成をコード化してバージョンとすることで、スケーラブルなウェブアプリケーションを実行できる
- 単一コンテナのDockerコンテナを実行可能
- 複数コンテナはECSを使用した環境実行が可能
##### 2-2-3-2. ワーカー環境
- SQS + Auto Scalingでスケーラブルなバッチ処理ワークを実現
- 定期的なタスク実行基盤の作成：毎日深夜1時に動作するバックアップ処理
- ワーカーホスト内でWebアプリケーションを動作させ、ワークロードの時間が係る処理を実行させる
### 2-3. AWS OpsWorks
#### 2-3-1. AWS OpsWorksとは
AWS OpsWorksとは、ChefまたはPuppetを使用してアプリケーションを設定および運用するための設定管理サービスです。
#### 2-3-2. Elastic BeanstalkとOpsWorksの比較
WEBアプリのデプロイに特化したElastic Beanstalkに対して、OpsWorksは様々なアプリケーションに対応する高度なインフラ環境構築が可能です。
##### 2-3-2-1. Elastic Beanstalk
![](../../aws_cp_management_and_governance_elasticbeanstalk.png)
- アプリケーションのデプロイ自動化
  - ウェブアプリケーションやサービスを使い慣れたサーバーにおいてデプロイとスケーリングするためのサービス
##### 2-3-2-2. OpsWorks
![](../../aws_cp_management_and_governance_opsworks.png)
- インフラの設定自動化
  - ChefやPuppet のマネージド型インスタンスのサーバーの設定・デプロイ・管理を自動化できるようになるインフラの設定管理サービス
### 2-4. AWS Service Catalog
AWS Service Catalogとは、AWSで承認されたITサービスのカタログを作成および管理する支援サービスです。  
以下のようなユースケースで利用することが出来ます。
#### 2-4-1. IT運用管理者
CloudFormationのテンプレートを利用して、管理されるAWSリソース定義や、これらの利用権限をカタログとして一元管理する機能を提供
#### 2-4-2. ユーザ部門
IT運用管理者が作成したカタログより、権限がなくとも求める機能に応じたAWS環境を必要に応じて起動が可能になる
### 2-5. AWS Marketplace
AWS Marketplaceとは、AWSで利用できるソフトウェアウェアなどが売り買いできるオンラインストアです。
## 3. 運用・操作系のサービス
AWSの運用管理を効率化したり、向上させたりするサービスとして以下のようなものがあります。

| サービス名 | 説明 |
|-------|-------|
| Amazon CloudWatch | アプリケーションを監視し、リソース使用率の最適化を行い、運用上の健全性を統括的に把握するモニタリングサービス |
| AWS CloudTrail | ユーザーアクティビティと API 使用状況の追跡するログ取得サービス |
| AWS Config | AWS リソースの設定を評価、監査、審査できるサービス |
| AWS Systems Manager | AWS のさまざまなサービスの運用データを確認でき、AWS リソース全体に関わる運用タスクを自動化する運用支援サービス |
| AWS Personal Health Dashboard | AWS のサービス状態のパーソナライズされた状況をダッシュボード形式で確認できる |
| AWS サポート | AWSによるサポートサービス<br/>ベーシック／開発者／ビジネス／エンタープライズプランの4つ |
### 3-1. AWS Config
#### 3-1-1. AWS Configとは
AWS Configとは、AWSリソースのレポジトリ情報からリソース変更履歴や構成変更を管理するサービスです。
#### 3-1-2. AWS Configの特徴
AWS Configの特徴には以下のようなものがあります。
- AWSリソースの構成変更をロギングして保存する（30日から7年）
- 履歴も定期的に構成情報スナップショットとして取得し、S3に保存
- 構成情報に基づきシステム構成があるべき状態になっているかを評価
- 評価基準にはAWSルールまたは独自ルールを適用
#### 3-1-3. AWS Configの構成要素
AWS Configには構成変更を管理するConfiguration Streamと、履歴管理するConfiguration Historyと、構成要素を保存するConfiguration Snapshotがあります。
##### 3-1-3-1. Configuration Stream
- リソースが作成・変更・削除に対して作成され、構成ストリームに追加される
- SNSトピック連携して通知設定が可能
##### 3-1-3-2. Configuration History
- 任意の期間における各リソースタイプの構成要素を履歴として蓄積
- S3バケットに保存
##### 3-1-3-3. Configuration Snapshot
- ある時点での構成要素の集合
- 自動で定期的あるいは変更トリガーで作成
- S3バケットに保存
### 3-2. AWS Systems Manager
### 3-2-1. AWS Systems Managerとは
AWS Systems Managerとは、利用中のAWSサービスやリソースをモニタリングして、運用タスクを自動化する統合監視サービスです。
### 3-2-2. AWS Systems Managerの特徴
AWS Systems Managerの特徴には以下のようなものがあります。

| 特徴 | 内容 |
|-------|-------|
| 問題検出の時間短縮 | EC2などをリソースグループごとに運用データを確認できるため、アプリケーションに影響を与えうるリソースの問題をすばやく特定可能 |
| 運用の自動化 | EC2のパッチ、更新、設定変更・削除・停止およびデプロイなどを自動化 |
| 可視化と制御 | 各リソースグループの最新状態を簡単に可視化して制御できる |
| ハイブリッド管理 | AWSサーバーとオンプレミスのサーバーとを1つのインターフェイスで管理可能 |
### 3-3. AWS Personal Health Dashboard
AWS Personal Health Dashboardは、AWS のサービス状態のパーソナライズされた状況をダッシュボード形式で確認できるダッシュボードです。
### 3-4. AWSサポート
![](../../aws_cp_management_and_governance_suportplan.png)
AWSサポートは、AWSによる人的なオペレーターによる問い合わせや不具合のサポートをしてくれる問い合わせ窓口です。  
図のように４種類のプランが有り、それぞれで金額や対応内容が変わってきます。