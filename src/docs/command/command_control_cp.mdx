# コマンド操作の学習「cp」
cpコマンドはファイルやディレクトリをコピーするコマンドです。  
ファイルのバックアップ等色々な場面で利用するためしっかり覚えましょう。
## 1. 基本コマンド
ファイルをコピーする場合は下記のコマンドで行うことができます。
```shell
cp <コピー元> <コピー先>

例：testディレクトリのtest01ファイルをtest01_copyとしてコピーしたい場合
cp test/test01 test/test01_copy
```
ファイル名を変更せずにコピーする場合は、コピー先にはディレクトリ名だけを記載します。
```shell
例：testディレクトリのtest01ファイルを名前はそのままtest_copyディレクトリに
　　コピーしたい場合
cp test/test01 test_copy/
```
ワイルドカードを使ってディレクトリ配下のファイルを一括でコピーしたり、条件に合うファイルを一括でコピーすることもできます。
```shell
例：testディレクトリ配下のファイルをtest_copyディレクトリにコピーしたい場合
cp test/* test_copy/

例：testディレクトリ配下の.txt拡張子のファイルをtest_copyディレクトリにコピーしたい場合
cp test/*.txt test_copy/
```
複数ファイルをコピーしたい場合は以下の形で指定します。
```shell
cp <コピー元その１> <コピー元その２> <コピー先ディレクトリ>

例：testディレクトリ配下のtest01、test02をtest_copyにコピーしたい場合
cp test/test01 test/test02 test_copy
```
## 2. 便利なcpコマンドのオプション
### 2-1. -rオプション：ディレクトリごとコピーする
-rオプションを利用することでディレクトリごとコピーすることができます。  
ディレクトリ内のファイルごとコピーが行なえます。
```shell
cp -r <コピー元ディレクトリ> <コピー先ディレクトリ>

例：testディレクトリをtest_copyディレクトリにコピーする場合
cp -r test/ test_copy/
```
### 2-2. -iオプション：上書きになる時は確認を行う
-iオプションを利用することで上書きコピーをする場合に確認を行うようになります。  
上書きしてしまうと元に戻せないので、重要なファイルを扱っている際は便利です。
```shell
cp -i <コピー元> <コピー先>
```
### 2-3. -bオプション：上書き時にバックアップファイルを作成する
-bオプションを利用することで上書き時にバックアップファイルを作成することができます。  
上述の-iオプションで確認を行うことも大事ですが、バックアップファイルを作ることでより安全に作業が行なえます。
```shell
cp -b <コピー元> <コピー先>

例：testディレクトリのtest01.txtをtest_copyディレクトリにtest01.txtとして
　　バックアップファイルを作りつつ上書きコピーする場合
cp -b test/test01.txt test_copy/test01.txt
※バックアップファイルはtest01.txt~として作成されます
```
バックアップ時に後ろに付ける文字列は--suffixオプションで指定することができます。  
基本的には以下のように指定して日付を付けるのがおすすめです。
```shell
cp -b --suffix=_$(date +%Y%m%d) <コピー元> <コピー先>

例：testディレクトリのtest01.txtをtest_copyディレクトリにtest01.txtとして
　　バックアップファイルを作りつつ上書きコピーする場合
cp -b --suffix=_$(date +%Y%m%d) test/test01.txt test_copy/test01.txt
※バックアップファイルはtest01.txt_20210921のように日付が付与されて作成されます
```
### 2-4. -vオプション：コピーした情報を表示
-vオプションを利用することで何がコピーされたかの情報を表示してくれます。  
ワイルドカードを使ってファイルをコピーした際に付けておくと分かりやすくて便利です。
```shell
cp -v <コピー元> <コピー先>

例：testディレクトリ配下の.txt拡張子のファイルをtest_copyディレクトリにコピーしたい場合
cp test/*.txt test_copy/

※実行結果例
`test/test01.txt` -> `test_copy/test01.txt`
`test/test02.txt` -> `test_copy/test02.txt`
`test/test03.txt` -> `test_copy/test03.txt`
`test/test04.txt` -> `test_copy/test04.txt`
`test/test05.txt` -> `test_copy/test05.txt`
```
## 3. 学習用サーバーに接続して、実際にコマンドを試してみましょう