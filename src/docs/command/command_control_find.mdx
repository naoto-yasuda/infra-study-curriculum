# コマンド操作の学習「find」
findコマンドはLinuxサーバーでファイルやディレクトリを検索するために利用するコマンドです。  
自分で作ったファイルや各種設定ファイルを探す時によく使います。
## 1. 基本コマンド
findコマンドの後ろに検索したいファイルを指定して実行することでファイルを検索できます。
```shell
find <ファイル名>

find /var/log/messages

※出力結果例
・ファイルが有る場合
/var/log/messages

・ファイルが無い場合
find: ‘/var/log/test_messages’: そのようなファイルやディレクトリはありません
```
## 2. 便利なfindコマンドのオプション
### 2-1. -nameオプション：ファイル名やディレクトリ名をワイルドカードを利用して検索する
-nameオプションを利用することでファイル名やディレクトリ名しか分からない場合でも検索することができます。  
```shell
find <検索先> -name ファイル名

例：/test/配下のtest-YYYYMMDD.txtファイルを探す
find /test/ -name test-*.txt

※出力結果例
/test/test-20210914.txt
/test/test-20210910.txt
/test/test-20210810.txt

例：/配下の*.txtファイルを探す（サーバー全体から.txtの拡張子のファイルを探す）
find / -name *.txt

※出力結果例
/test/test1.txt
/var/test2.txt
/tmp/test3.txt
```
### 2-2. -atimeオプション：任意の日数にアクセスされたファイルやディレクトリを検索する
-atimeオプションを利用することで指定した日にアクセスされたファイルやディレクトリを検索できます。  
例えば昨日アクセスされたファイルを確認したい、という時などに活用できます。
```shell
find <検索先> -atime <日数>

例：今日アクセスされたファイルを検索する
find /test/ -atime 0
```
任意の日数以内にアクセスされたファイルやディレクトリを検索したい場合は日数に「-」を付けると検索できます。
```shell
find <検索先> -atime -<日数>

例：3日以内にアクセスされたファイルを検索する
find /test/ -atime -3
```
任意の日数より前にアクセスされたファイルやディレクトリを検索したい場合は日数に「+」を付けると検索できます。
```shell
find <検索先> -atime +<日数>

例：3日より前にアクセスされたファイルを検索する
find /test/ -atime +3
```
### 2-3. -mtimeオプション：任意の日数に更新されたファイルやディレクトリを検索する
-mtimeオプションを利用することで指定した日に更新されたファイルやディレクトリを検索できます。  
例えば昨日更新されたファイルを確認したい、という時などに活用できます。
```shell
find <検索先> -mtime <日数>

例：今日更新されたファイルを検索する
find /test/ -mtime 0
```
任意の日数以内に更新されたファイルやディレクトリを検索したい場合は日数に「-」を付けると検索できます。
```shell
find <検索先> -mtime -<日数>

例：3日以内に更新されたファイルを検索する
find /test/ -mtime -3
```
任意の日数より前に更新されたファイルやディレクトリを検索したい場合は日数に「+」を付けると検索できます。
```shell
find <検索先> -mtime +<日数>

例：3日より前に更新されたファイルを検索する
find /test/ -mtime +3
```
### 2-4. -aminオプション：任意の分数にアクセスされたファイルやディレクトリを検索する
-aminオプションを利用することで指定した日にアクセスされたファイルやディレクトリを検索できます。  
例えば30分前にアクセスされたファイルを確認したい、という時などに活用できます。
```shell
find <検索先> -amin <分数>

例：直前にアクセスされたファイルを検索する
find /test/ -amin 1
```
任意の分数以内にアクセスされたファイルやディレクトリを検索したい場合は分数に「-」を付けると検索できます。
```shell
find <検索先> -amin -<分数>

例：30分以内にアクセスされたファイルを検索する
find /test/ -amin -30
```
任意の分数より前にアクセスされたファイルやディレクトリを検索したい場合は分数に「+」を付けると検索できます。
```shell
find <検索先> -amin +<分数>

例：30分より前にアクセスされたファイルを検索する
find /test/ -amin +30
```
### 2-5. -mminオプション：任意の時間に更新されたファイルやディレクトリを検索する
-mminオプションを利用することで指定した時間に更新されたファイルやディレクトリを検索できます。  
例えば30分前に更新されたファイルを確認したい、という時などに活用できます。
```shell
find <検索先> -mmin <分数>

例：直前に更新されたファイルを検索する
find /test/ -mmin 1
```
任意の分数以内に更新されたファイルやディレクトリを検索したい場合は分数に「-」を付けると検索できます。
```shell
find <検索先> -mmin -<分数>

例：30分以内に更新されたファイルを検索する
find /test/ -mmin -30
```
任意の分数より前に更新されたファイルやディレクトリを検索したい場合は分数に「+」を付けると検索できます。
```shell
find <検索先> -mmin +<分数>

例：30分より前に更新されたファイルを検索する
find /test/ -mmin +30
```
### 2-6. -emptyオプション：ファイルやディレクトリの容量が無いものを検索する
-emptyオプションを利用することで空のファイルやディレクトリを検索できます。  
例えば本来動作していればログが出るはずのファイルの中に上手く動いてないものが無いか確認したりする時に使えるかもしれません。
```shell
find <検索先> -empty

例：/test/配下の空ファイルを検索する
find /test/ -empty
```
### 2-7. -sizeオプション：ファイルの容量を指定して検索する
-sizeオプションを利用することでファイルの容量を指定して検索することができます。  
指定したファイル容量以上のものを検索したい場合はファイル容量の指定の前に「+」を、以下の場合は「-」を付与することでより便利に利用できます。  
またファイル容量の後ろに「c」を付与するとファイル容量の単位がByteとなり、「k」を付与するとkByteになります。
```shell
find <検索先> -size <ファイル容量>

例：/test/配下の200Byte以上のファイルを検索する
find /test/ -size +200c

例：/test/配下の5kByte以下のファイルを検索する
find /test/ -size -5k
```



### 2-8. -type fオプション：ファイルのみを対象として検索する
-type fオプションを利用することでファイルのみを対象として検索できます。  
使い所はあまり無いかもしれませんが、ディレクトリとファイルが似たような名前で数多く存在していた場合などに活用できます。
```shell
find <検索先> -type f

例：/test/配下のファイルのみを検索する
find /test/ -type f
```
### 2-9. -type dオプション：ディレクトリのみを対象として検索する
-type dオプションを利用することでディレクトリのみを対象として検索できます。  
使い所はあまり無いかもしれませんが、ディレクトリとファイルが似たような名前で数多く存在していた場合などに活用できます。
```shell
find <検索先> -type d

例：/test/配下のディレクトリのみを検索する
find /test/ -type d
```
### 2-10. -andオプション：複数の条件を使って、全ての条件に当てはまるファイルやディレクトリを検索する
-andオプションを利用することで条件を複数指定して、その全てに当てはまるもののみを検索することができます。   
```shell
find <検索先> <検索条件1> -and <検索条件2>

例：/test/配下のファイル名がtest-*.txtに一致し、かつ3日以内に更新されたファイルを
　　検索する
find /test/ -name test-*.txt -and -mtime -3
```
### 2-11. -orオプション：複数の条件を使って、いずれかの条件に当てはまるファイルやディレクトリを検索する
-orオプションを利用することで条件を複数指定して、そのいずれかに当てはまるもののみを検索することができます。   
```shell
find <検索先> <検索条件1> -or <検索条件2>

例：/test/配下のファイル名がtest-*.txtに一致する、もしくは3日以内に更新されたファイルを
　　検索する
find /test/ -name test-*.txt -or -mtime -3
```
### 2-12. -notオプション：検索条件に当てはまらないファイルやディレクトリを検索する
-notオプションを利用することで検索条件に当てはまらないファイルやディレクトリを検索することができます。   
```shell
find <検索先> -not <検索条件>

例：/test/配下のファイル名がtest-*.txtに一致しないファイルを検索する
find /test/ -not -name test-*.txt
```
## 3. 学習用サーバーに接続して、実際にコマンドを試してみましょう