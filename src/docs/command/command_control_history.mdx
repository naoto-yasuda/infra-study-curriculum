# コマンド操作の学習「history」
historyコマンドはコマンドの実行履歴やコマンドの入力履歴を外部ファイルで管理したりするためのコマンドです。  
作業履歴を残しておくのは後になって「どういう操作をしたのか」「エラーが起きているがどこかでミスをしていないか」などを確認するのに便利です。
## 1. 基本コマンド
作業履歴をただ表示したい場合は下記のコマンドで表示することができます。
```shell
history

※実行結果例
～　省略　～
  593  rm -rf test*
  594  ll
  595  exit
  596  clear
  597  history
```
実行結果に表示される内容の左側の番号は管理番号で、基本的にはこの順番で入力されていることを指す番号になります。
## 2. 便利なhistoryコマンドのオプション
### 2-1. -cオプション：記録されているコマンド履歴を消去する
-cオプションを利用することで記録されているコマンド履歴を消去することができます。
```shell
history -c
```
### 2-2. -dオプション：記録されているコマンド履歴から指定した管理番号のコマンド履歴を削除する
-dオプションを利用することで任意の管理番号のコマンド履歴を消去することができます。
```shell
history -d <管理番号>

例：管理番号594番のコマンド履歴を削除したい場合
history -d 594
```
### 2-3. -wオプション：記録されているコマンド履歴をファイルに書き込む
-wオプションを利用することで記録されているコマンド履歴をファイルに書き込むことができます。  
```shell
history -w <ファイル名>

例：コマンド履歴をtest_history.txtに出力する場合
history -w test_history.txt
```
### 2-4. -rオプション：ファイルに書き込まれているコマンド履歴を読み込む
-rオプションを利用することでファイルに書き込まれているコマンド履歴を読み込むことができます。  
```shell
history -r <ファイル名>

例：test_history.txtからコマンド履歴を読み込む場合
history -r test_history.txt
```
### 2-5. -aオプション：記録されているコマンド履歴をファイルに追記で書き込む
-aオプションを利用することで記録されているコマンド履歴を追記でファイルに書き込むことができます。  
```shell
history -a <ファイル名>

例：コマンド履歴をtest_history.txtに追記で出力する場合
history -a test_history.txt
```
## 3. Tips
### 3-1. 履歴からコマンドを実行する
以下のように履歴の管理番号を指定して実行することで、過去に実行したコマンドを再利用することが出来ます。
```shell
!<履歴の管理番号>

例：700番の履歴を実行する
!700
```
## 4. 学習用サーバーに接続して、実際にコマンドを試してみましょう
[リンク](https://bellard.org/jslinux/)を開いて、「x86 Alpine Linux 3.12.0 Console」の「click here」をクリックしましょう。  
出てきたコンソール画面に対してコマンドを入力してみてください。  
上手くいかない時は教育担当までご連絡をお願いします。