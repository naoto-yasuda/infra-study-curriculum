# コマンド操作の学習「passwd」
passwdコマンドはユーザーがログインする時のパスワードを設定するためのコマンドです。  
ユーザーを追加しただけではパスワードが設定されていないのでこのコマンドでパスワードを設定する必要があります。
## 0. 事前準備
### ※テスト用ユーザの追加
以下のコマンドを実行してテスト用のユーザを作成します。
```shell
useradd testuser
```
### ※権限の切り替え
本ページのコマンドを試すためには管理者ユーザになる必要があるため[su](/command/command_control_su)コマンドで管理者ユーザに切り替えておいてください。
## 1. 基本コマンド
ユーザのパスワードの変更は下記のコマンドで行うことができます。
```shell
passwd <ユーザ名>

例：testuserユーザのパスワードに変更する場合
passwd testuser

※コマンドを入力すると設定したいパスワードの問い合わせが２回あります。
　同じパスワードを指定することで設定を完了することができます。
```
パスワードの変更は一般ユーザでは操作できません。  
管理者権限を持つアカウントで操作する必要があります。  
ただし自分のパスワードだけは一般ユーザでも変更することができます。
## 2. 便利なpasswdコマンドのオプション
### 2-1. -lオプション：ユーザのパスワードをロックする
-lオプションを利用することでユーザのパスワードをロックしてログインできなくすることができます。  
対象のユーザが問題のある操作をしていたり、パスワードの流出などセキュリティ的に問題が発覚した場合などに利用して対処を行います。
```shell
passwd -l <ユーザ名>

例：testuserのパスワードをロックする場合
passwd -l testuser

※実行結果例
ユーザー testuser 用のパスワードをロック。
passwd: 成功
```
[su](/command/command_control_su)コマンドを使ってtestuserでのログインを試してみます。
```shell
例：testuserにユーザを切り替える
su testuser
```
正しいパスワードを入力してもログインが失敗するようになります。
### 2-2. -uオプション：ユーザのパスワードのロックを解除する
-uオプションを利用することで-lオプションでロックしたパスワードのロックを解除することができます。  
```shell
passwd -u <ユーザ名>

例：testuserのパスワードのロックを解除する場合
passwd -u testuser

※実行結果例
ユーザー testuser 用のパスワードをロック解除。
passwd: 成功
```
[su](/command/command_control_su)コマンドを使ってtestuserでのログインを試してみます。
```shell
例：testuserにユーザを切り替える
su testuser
```
正しいパスワードを入力するとログインができるようになります。
## 3. 学習用サーバーに接続して、実際にコマンドを試してみましょう
[リンク](https://bellard.org/jslinux/)を開いて、「x86 Alpine Linux 3.12.0 Console」の「click here」をクリックしましょう。  
出てきたコンソール画面に対してコマンドを入力してみてください。  
上手くいかない時は教育担当までご連絡をお願いします。